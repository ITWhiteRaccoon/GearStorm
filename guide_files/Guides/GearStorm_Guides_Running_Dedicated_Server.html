<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <link rel="stylesheet" href="missions.css?v=1.0">
</head>
<body>
    <div Class="Main">
        <div Class="Column" id="Dialog">
          <h3 class="DialogText">
            Running Your Own Dedicated Server</h3>
          <p>
Running your own dedicated GearStorm server will give you full control over your community's GearStorm experience and the best performance for a large number of players.<p>

Contents<br>
<ol>
  <li> Prerequisites</li>
  <li> Hardware</li>
  <li> Network</li>
  <li> Prerequisites
    <ol>
      <li>Windows</li>
      </ol>
  </li>
  <li>Copying the Server</li>
  <li> Configuring the Server</li>
  <li> Running the Server</li>
  <li> Port Forwarding and Firewall
    <ol>
      <li> Windows (Firewall and Allow Rules)</li>
      <li> Port Forwarding</li>
      <li> Finding Your Server in Lists</li>
      </ol>
  </li>
  <li> Automatic Startup
    <ol>
      <li> 	Windows (via Scheduled Task)</li>
      </ol>
  </li>
  <li> 	Updating</li>
  <li> Administrating Your Server</li>
  <li> Backing Up Server Data</li>
  <li> Troubleshooting
    <ol>
      <li> 	Server Loses Characters or World Data Upon Restart</li>
      </ol>
  </li>
  <li> 	Notes</li>
  <li> References</li>
  <li> External Links</li>
  </ol>
<h3>
  
  Prerequisites<br>
</h3>
<p>Your OS must be a 64-bit OS (The GearStorm server is a 64-bit executable and as such will not run on a 32-bit install of Windows). The server supports Windows Desktop 7, 8, 10 or newer, and Windows Server 2012 R2or newer.
  <h4>
    
    Hardware<br>
  </h4>  
  <p>The server requires at least 6GB of RAM to start. Memory requirements increase as the number of connected players increases. On Windows Server 2012 R2, the client uses 3.1GB of RAM without any clients. Processor: GearStorm dedicated servers can be demanding on processors power, we recommend investing in the most number of cores you can get and nothing lower than a Intel i7 or equivalent.
    <h4>Network<br>
      </h4>
    <p>GearStorm can be demanding on the network also, for a dedicated server with more than 5 players online full time, we recommend at least 1 Gigabit of upload and download speed, more may be required depending on how many players you have on at the same time. The server listens for incoming connections on the ports listed below. Ensure your network configuration allows incoming connections to these ports and directs them to the host that will be running your dedicated server.            
  <p>

Port	Purpose<br>
UDP 27015	Query port for Steam's server browser<br>
UDP 7777	Game client port<br>
UDP 7778	Raw UDP socket port (always Game client port +1)<br>
TCP 27020	RCON for remote console server access (optional)<p>
You can host multiple dedicated servers on the same host, however be aware that CPU and memory should be monitored carefully if they are busy servers rather than test servers.<p>

For example:<br>
Server instance	Game port	Raw UDP port	Query port	RCON port<br>
Server game instance 1	7777	7778	27015	27020<br>
Server game instance 2	7779	7780	27016	27021<br>
Server game instance 3	7781	7782	27017	27022<br>
Server game instance 4 (completely different ports)	9999	10000	37015	37016<p>

<strong>*Notes*</strong><br>
Query Port cannot be between 27020 and 27050 due to Steam using those ports.<br>
Don't forget about the windows firewall! Just allow the "gearstormserver.exe" through it.
<h4>Prerequisites<br>
</h4>
<p>Windows<br>
    Microsoft Visual C++ 2013 Redistributable.<br>
    DirectX.  
<h4>
  
  Copying the Server<br>
</h4>
<p>The dedicated server is available for Windows only for now. The server is included in your Steam distribution of the game. Simply copy YOUR_STEAM_GEARSTORM_FOLDER to your server.
  <h4>
    
    Configuring the Server<br>
  </h4>  
  <p>The configuration parameters you need to set OUTSIDE of the game are in the "defaultgame.ini" in the "C:\Program Files (x86)\Steam\steamapps\common\GearStorm\GearStorm\Config" directory. You may want to copy the section below to your "game.ini" file in the "C:\Program Files (x86)\Steam\steamapps\common\GearStorm\GearStorm\Saved\Config\WindowsNoEditor" directory.  
  <p>

[/Script/ShooterGame.ServerSettings]<br>
ServerName="Iron City Corporate Wasteland"<br>
ServerDescription="Mesos Map, All Weapons, All Vehicles, AI on Hardest, Everyone is Admin"<br>
+ServerAdmin=*<p>

Edit the "ServerName" to display your server name in the Steam server browser and in the GearStorm in-game server browser.<p>

Edit the "ServerDescription" field to display your description in the Steam server browser and in the GearStorm in-game server browser.<p>

In the example above, the entry "+ServerAdmin=*" means everyone that logs into the server is admin! You can delete this line and add admins via a Steam player's 17-digit Steam ID number. A Steam ID number can be seen by going to the "view my profile" option on the upper-right hand side of the page and looking at the URL field. The Steam ID number is the number after "https://steamcommunity.com/profiles/". Simply add new lines for each player you want to be admin like the example below:<br>
+ServerAdmin=12345678912345678<br>
+ServerAdmin=06061118111011701<br>
+ServerAdmin=00000000000000000<br>
+ServerAdmin=10101001000011100<p>

***If you don't remove the "+ServerAdmin=*" entry, everyone that logs into your server will be admin no matter what other listing you put in!***
<h4>
  
  Running the Server<br>
</h4>
<p>Create start_GearStorm_server.bat: and place it in YOUR_STEAM_GEARSTORM_FOLDER/GearStorm/GearStorm/Binaries/Win64/ (remove the '<' '>' symbols!)<br>
  start ShooterGameServer.exe /game/maps/Campaign?Port=<port>?QueryPort=<query_port>?MaxPlayers=<max_players><br>
  exit
<h4>
  
  Port Forwarding and Firewall<br>
</h4>
<p>For your server to become visible in both the GearStorm in-game server browser and the Steam server browser, do the following:
<h4>
  
  Windows (Firewall and Allow Rules)<br>
</h4>
<ol>
  <li> If you're on Windows 10, click on the search box in the lower left corner and type in "Firewall". Click on "Windows Firewall".</li>
  <li> Once Firewall opens, click "Advanced settings" on the left panel.</li>
  <li> Click "Inbound Rules" on the left panel, then click "New Rule..." on the right panel.</li>
  <li> When the New Inbound Rule Wizard opens up, select Port, then next.</li>
  <li> The setup will now ask you if you want to allow TCP or UDP, and what port it will be. Select TCP. Then, make sure you have "Specific local ports" selected and then put the port you plan to forward into the box (default 27020 for RCON).</li>
  <li> Select "Allow the connection", and continue with the wizard.</li>
  <li> Make sure all of the boxes are selected for where the rule applies.</li>
  <li> Enter a name (required) and a description (optional).</li>
  <li> Repeat these steps, but instead of allowing TCP allow UDP. Make sure to enter your steam browser/query port (27015 default) and game port (7777 default). You also need the raw udp socket port (7778 default, always your game port +1) if using ?bRawSockets.</li>
  <li> You should have 3 port rules now in the Inbound Rules section.</li>
  <li>This section and the port forwarding section go hand in hand.</li>
  <li> Close the advanced firewall window, and open Windows Firewall again.</li>
  <li> Click "Allow an app or feature through Windows Firewall". Scroll down to ShooterGame. Make sure all apps named ShooterGame have the 13. Private and Public boxes checked.</li>
  <li> You're done, and if your ports don't work when you forward them, you can edit your Firewall inbound rules by going back to the advanced tab, selecting the Inbound Rules tab, right-clicking the rules you created, then clicking properties.</li>
</ol>
<h4>
  
  Port Forwarding<br>
</h4>
<p>portforward.com offers tutorials for setting up port forwarding on your router.
  <p>

For the default setup, forwarding 27015 as the port, and 27016 as the query port. 27015, 27016, and 7777 are the most common ports that work.<p>

You MUST forward both TCP and UDP for your server to show up on any lists. You can make sure your ports are open by using the tool from portforward.com, that is, after you<p>

Enter the ports that you have forwarded in the start_server.bat file you should have created earlier. For example:<br>
start ShooterGameServer.exe TheIsland?listen?SessionName=<server_name>?ServerPassword=<join_password>?ServerAdminPassword=<admin_password>?Port=7777?QueryPort=27015?MaxPlayers=<max_players></max_players>
<h4>
  
  Finding Your Server in Lists<br>
</h4>
<p>You can access your server via the Steam server browser or the GearStorm Browser. Just search for you name in the GearStorm server browser, or find your IP address in the Steam server browser.
<h4>
  
  Automatic Startup<br>
</h4>
<p>Windows (via Scheduled Task)<br>
  You can configure a scheduled task to automatically run a batch file and start the dedicated server when the system boots.
<ol>
  <li>
    
     Open 'Task Scheduler'</li>
  <li> Create Basic Task</li>
  <li> The 'Create Basic Task Wizard' will appear, name the task whatever you want</li>
  <li> Set the Trigger to 'When the computer starts'</li>
  <li> Set the Action to 'Start a program'.</li>
  <li> You will need to browse to the program/script you wish to start (which is your .BAT batch file that starts your server).</li>
  <li> Depending on how your batch file works, you may need to set the "Start in (optional)" path, so the working directory of your batch file is correct. (If your batch file simply contains the "start ShooterGame ..." command, then you should set the "Start in (optional)" path of your scheduled task to the directory that contains the batch file)</li>
  <li> Before you create the scheduled task, click the checkbox to "open properties window" after it's created</li>
  <li> In the General Tab under the Security Options frame, you probably want to choose "Run whether user is logged on or not"</li>
  <li> I personally checked "run with highest privileges" just in case. This might not be necessary.</li>
</ol>
<p>

After following these steps, your server should be up and running, and be automatically managed by the host on startup and shutdown.

Updating
To update the server when a new version is released, just re-copy your game from you Steam directory to your server. Be sure to preserve the same files in your server's "\Saved\SaveGames" directory before you copy the game over and re-copy them over the files in the game directory.
<h4>
  
  Administrating Your Server<br>
</h4>
<p>GearStorm has in-game GUI interfaces for most admin functions. By default, the "backspace" key will bring up the admin menu and allow a admin to teleport himself or other players, spawn anything, build fast and unlimited, fly, kick players, kill players, ban players, change weapon damages, range, dropoffs for the whole server instantly, edit and create new quests, change the weather instantly, change the time of day, alter the shadow lighting for every player on the server instantly, send special notices to all the players, and save and load the server map. All while playing the game, inside the game interface.
<p>

Some built items have special admin functions (for example, building cores) that you can access with "alt-e" instead of "e" (default key setting). As a admin, you can use these menus to set the destructibility of blocks within a core's radius or the difficulty level of the AI in that core's radius, for example.
<h4>
  
  Backing Up Server Data<br>
</h4>
<p>To make a backup of the server data, simply copy the folder named ShooterGame/Saved (and his content) to the desired backup location. This folder contains all item, social, player and world data for the server. Performing a backup is recommended before updating a server to a new release.
<h4>
  
  Troubleshooting<br>
</h4>
<h4>Server Loses Characters or World Data Upon Restart<br>
</h4>
<p>If your server isn't retaining characters or world data when it's restarted, it may not have full access to the folder where it's installed.  
<p>

The first time the server is run, it should create a folder named GearStorm/Saved containing various configuration and save files. If the server has run at least once but hasn't created this folder, it may not have been able to create new folders and files there. Verify that the folder where the server is installed is readable and writable by the user account that actually runs the server. (For Windows servers, check the status of User Account Control)<p>

The server software, by default, is set-up to automatically save world data every 15 minutes. If your server crashes before the first 15 minutes are up, you will not have any data saved.
		</p></div>

        <div Class="Column" id="ImageColumn"></div>
        <div class="padder"></div>
    </div>
</body>
</html>